<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
      <a href="http://localhost:8888">
          <button>Login With Spotify</button>
      </a>
      <button id = "getToken">Get Access Token</button>
      <p>Access Token is: </p>
      <p id = "token"></p>

      <div>Now Playing: </div>
      <script>
        function getHashParams() {
            var hashParams = {};
            var e, r = /([^&;=]+)=?([^&;]*)/g,
                q = window.location.hash.substring(1);
            while ( e = r.exec(q)) {
             hashParams[e[1]] = decodeURIComponent(e[2]);
            }
            return hashParams;
        }
        document.getElementById("getToken").addEventListener('click', function() {
          var params = getHashParams();
          console.log(params.access_token);
          // console.log(params)
          if (typeof params.access_token === 'undefined') {
            document.getElementById("token").innerHTML = "Please login to Spotify first";
          } else {
            document.getElementById("token").innerHTML = params.access_token;
          }
        })
      </script>


  </body>
</html>