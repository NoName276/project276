<!DOCTYPE html>

<html>
	<head>
        <title>Club Game</title>
        <link href='https://fonts.googleapis.com/css?family=Monofett' rel='stylesheet'>
				<link href="https://fonts.googleapis.com/css?family=Press+Start+2P&display=swap" rel="stylesheet">
        <script src="/scripts/socket.io.js"></script>
        <link rel="stylesheet" type="text/css" href="/stylesheets/main.css" />
	</head>

	<body>
            <h1 style="color:white;">The Club</h1>
            <p id="p" >Now Playing: <%= name %> by <%= artist %></p>

						<img id="side" style="padding-left:5%" src="/assets/enemy1.gif">
						<img id="side" style="padding-left: 67%; width: 435px" src="/assets/enemy2.gif">
            <div class= "main" id="gamediv">
							<form class= "form">
									<p id="score" style="color:black;">Score:</p>
									<p id="player score" style="color:black;">0</p><br>
									<p id="m" style="color:black;">Multiplier:</p>
									<p id="player mult" style="color:black;">x1.0</p><br>
	                <input type="number" class ="bpm" style="color:rgba(255, 0, 0, 0); background-color:rgba(255, 0, 0, 0);" id="bpm" value='<%= tempo %>'/>
	                <input class="button" type="button" value="change bpm" style="color:rgba(255, 0, 0, 0); background-color:rgba(255, 0, 0, 0);" onclick="change_bpm()" />
	            </form>
							<span style="padding-bottom: 100px;">
									<p id="hit" style="color:blue; font-size:50px; margin-left: 35%; display:inline;">READY</p><br>
									<p style="color:black; white-space:nowrap;display:inline; margin-left: 33%; position: absolute">Current Items:</p>
									<p id="items" style="display:inline; position:absolute;margin-left: 45%; position: absolute;"></p>
							</span>
              <div class ="row" id="game_grid">
                  <div id= "col1"class="top ">############</div><br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  #<div id= "col1">0000000000</div>#<br>
                  <div id= "col1" class="bottom">############<br>
									<br id= "col1" ></div>
                  <div id= "col1" >------------<br></div>
                  <div id= "col1"> 00000||00000<br></div>
                  <div id= "col1">------------<br></div>
              </div>
		        </div>

			      <div id="musicdiv" align="center">
			         <p id = "countTitle">Start music in: </p>
				       <p id = "countDown"></p>
				       <iframe src="https://open.spotify.com/embed/track/<%= uri %>" id="iframeId" width="350" height="470" frameborder="0" allowtransparency="true" allow="encrypted-media" ></iframe>
				       <p id= 'songDur'> Duration: <%= duration %> </p>
				       <p id="songUri"> Song Uri: <%= uri %> </p>
				    </div>
            <script>
                var player_num = <%= playerNumber %>
                var num_players = <%= numberOfPlayers %>
                var player_name = <% if(username){ %> '<%= username %>' <% }else{ %> <%= 'undefined' %> <%}%>
                var x = <%= enemiesStart[0] %>
                var y = <%= enemiesStart[1] %>
                var x2 = <%= enemiesStart[2] %>
                var y2 = <%= enemiesStart[3] %>
                var thirdx = <%= enemiesStart[4] %>
                var third = <%= enemiesStart[5] %>
            </script>
            <script type="text/javascript" src="/scripts/game.js"></script>
            <input type="button" id="singleplayereturn" value="Back to Home"  />
            <input type="button" id="multiplayerexit" value="Exit"/>
            <script>
                    document.getElementById('multiplayerexit').style.visibility = 'hidden';
                    document.getElementById('singleplayereturn').style.visibility = 'hidden';
                    var title = document.getElementById("countTitle");
                    var display = document.getElementById("countDown");
                    var interval = setInterval(countDown,1000);
                    var seconds = 3;
                    function countDown() {
                        if (seconds == 0) {
                            title.innerHTML = "Play"
                            display.innerHTML = "Now";
                            setTimeout(function(){setTimeout(function(){game_running = true; game_loop(); setTimeout(function(){game_end();}, 1000*<%= duration %>)}, 1000/FRAMERATE);}, 2000);
                            clearInterval(interval)
                            console.log("Play Now")
                        } else {
                            // console.log(seconds)
                            display.innerHTML = seconds
                            seconds = seconds - 1;
                        }
                    }
                    window.onload = countDown();


                </script>
                 <input type="button" id="singleplayereturn" value="Back to Home"  />
				<input type="button" id="multiplayerexit" value="Exit"/>
            </div>

	</body>
</html>
